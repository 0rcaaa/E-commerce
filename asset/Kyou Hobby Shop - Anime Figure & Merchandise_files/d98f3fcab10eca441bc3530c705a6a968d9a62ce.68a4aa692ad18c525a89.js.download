(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[12],{"2Fc/":function(e,t,n){"use strict";n.d(t,"a",(function(){return L}));var r=n("oYCi"),a=n("JiVo"),o=n("mXGw"),i=n("uEoR"),c=n("/dBk"),s=n.n(c),u=n("qd51"),l=n("etRO"),d=n("4jfz"),p=n("g2+O"),f=n("mHfP"),b=n("1U+3"),g=n("DY1Z"),v=n("m6w3"),h=n("dAGg"),O=n.n(h),m=n("+f8N"),y=n("NzsR"),j=n.n(y),k=n("czhI"),_=n.n(k),w=n("Samx"),P=n.n(w),x=n("beY5"),N=(n("rYPP"),n("xnNu"),n("0d6z")),S=n.n(N),I=n("2R4Y"),M=n("Fbpo"),C=(n("rlyl"),n("yYqc"));function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){Object(v.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(g.a)(e);if(t){var a=Object(g.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(b.a)(this,n)}}var A=S()(),L=function(e){Object(f.a)(n,e);var t=E(n);function n(e){var c;return Object(l.a)(this,n),c=t.call(this,e),Object(v.a)(Object(p.a)(c),"supportsIntersectionObserver",!1),Object(v.a)(Object(p.a)(c),"state",D(D({},c.props),{},{items:[],activePage:1,total:0,isLoading:!0,pivot:40,manufacturers:{po:[],bo:[]},isPartner:!1,q:null,isInfiniteScrollLoading:!1})),Object(v.a)(Object(p.a)(c),"handleArrowKey",(function(e){var t=c.props,n=t.useIntersectionObserver,r=t.pagination,a=c.state,o=a.activePage,i=a.total,s=Math.floor(i/40);!n&&r&&("ArrowRight"===e&&o<=s?c.pageChange(o+1):"ArrowLeft"===e&&o>1&&c.pageChange(o-1))})),Object(v.a)(Object(p.a)(c),"getData",function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r,a,o,i,u,l,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.props,r=n.setResult,a=n.setFilter,o=n.setLoading,i=n.isx,e.prev=1,c.setState({isLoading:!0}),u=c.state.q,O.a.query.q!==u&&o(!0),e.next=7,_.a.get("".concat(t,"&r18=true"),{headers:D({accept:"application/json"},A.publicRuntimeConfig.stagingToken&&{"x-kyou-staging-token":A.publicRuntimeConfig.stagingToken})});case 7:l=e.sent,d=l.data,c.setState({items:d.data.items,total:d.data.total_items,activePage:O.a.query.page?Number.parseInt(O.a.query.page.split(",")[0],10):1},(function(){return c.setState({isLoading:!1})})),o(!1),Object(m.forceCheck)(),null===localStorage.getItem("access_token")||i||c.getEligibleManufacturers(),r(d.data.total_items),O.a.query.q!==u&&(a(D({},d.data.filters)),c.setState({q:O.a.query.q})),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),c.setState({isLoading:!1}),o(!1);case 21:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}()),Object(v.a)(Object(p.a)(c),"getEligibleManufacturers",Object(u.a)(s.a.mark((function e(){var t,n,r,a,o,u,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.state.isPartner){e.next=13;break}return e.next=4,Promise.all([I.a.get("voucher/PARTNERKYOU5"),I.a.get("voucher/PARTNERKYOUBO10")]);case 4:return t=e.sent,n=Object(i.a)(t,2),r=n[0],a=n[1],o=r.data,u=a.data,l={po:o.data.manufacturers,bo:u.data.manufacturers},c.setState({manufacturers:l}),e.abrupt("return",l);case 13:return c.setState({manufacturers:{po:[],bo:[]}}),e.abrupt("return",{po:[],bo:[]});case 15:case"end":return e.stop()}}),e)})))),Object(v.a)(Object(p.a)(c),"renderProduct",(function(e){var t=c.state,n=t.isPartner,a=t.manufacturers,i=t.isx;return e.filter((function(e){return null!==e.image_link})).map((function(e){var t,s,u,l,d,p,f=!1;if(n)switch(e.order_type){case"ready":f=!0;break;case"PO":a.po.forEach((function(t){t.manufacture.name===e.manufacturer&&(f=!0)}));break;case"BO":a.bo.forEach((function(t){t.manufacture.name===e.manufacturer&&(f=!0)}))}var b,g={id:e.id,image:e.icon_link,name:e.name,status:"PO"===e.order_type&&void 0===e.deadline&&0!==e.slot?"LPO":e.order_type,deadline:void 0!==e.deadline?P()(e.release_date,"MMMM YYYY"):null,release:"PO"===e.order_type?P()(e.release_date,"MMMM YYYY"):null,price:e.price,dp:e.down_payment||null,orderClose:"PO"===e.order_type&&void 0===e.deadline&&0===e.slot||c.isOrderClosed(e),soldOut:"ready"===e.order_type&&0===e.slot,manufacturerId:e.manufacturer,eligibleForDiscount:f,isAdultItem:e.is_adult||!1,useIsxMode:i,restocked:e.restock,rack:(b=e.stocks,i?b.reduce((function(e,t){return"ALPHA"===t.source?t.rack_name:e}),null):null),discountName:null!==(t=e.discount_name)&&void 0!==t?t:"",discountPrice:null!==(s=e.discount_price)&&void 0!==s?s:0,discountStartDate:null!==(u=e.discount_start_date)&&void 0!==u?u:"",discountEndDate:null!==(l=e.discount_end_date)&&void 0!==l?l:"",discountQuantity:null!==(d=e.discount_qty)&&void 0!==d?d:0,showcase:null!==(p=e.is_showcast)&&void 0!==p&&p};return Object(r.jsx)("div",{className:"gallery-product__content__product",children:Object(o.createElement)(C.a,D(D({},g),{},{key:e.id}))},e.id)}))})),Object(v.a)(Object(p.a)(c),"isOrderClosed",(function(e){return"PO"===e.order_type&&(void 0!==e.deadline&&new Date(e.deadline)<new Date((new Date).getTime()-864e5))})),Object(v.a)(Object(p.a)(c),"pageChange",(function(e){var t=c.state.pivot;O.a.push({pathname:O.a.pathname,query:D(D({},O.a.query),{},{page:"".concat(e,",").concat(t)})}),c.setState({activePage:e,isLoading:!0}),c.goToTop()})),Object(v.a)(Object(p.a)(c),"goToTop",(function(){window.scroll({top:0,left:0,behavior:"smooth"})})),Object(v.a)(Object(p.a)(c),"handleIntersect",(function(e){var t=c.state,n=t.activePage,r=t.link;e.isIntersecting&&n<5&&c.loadMore(r)})),Object(v.a)(Object(p.a)(c),"loadMore",function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r,o,i,u,l,d,p,f,b,g;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.state,r=n.items,o=n.total,i=n.activePage,u=i+1,l=new URLSearchParams(t).get("page"),d=l.split(","),p="".concat(Number.parseInt(d[0],10)+u,",").concat(Number.parseInt(d[1],10)),f=t.replace(l,p),c.setState({isInfiniteScrollLoading:!0}),e.next=9,_.a.get("".concat(f,"&r18=true"),{headers:D({accept:"application/json"},A.publicRuntimeConfig.stagingToken&&{"x-kyou-staging-token":A.publicRuntimeConfig.stagingToken})});case 9:b=e.sent,g=b.data,c.setState({items:[].concat(Object(a.a)(r),Object(a.a)(g.data.items)),total:o+g.data.total_items,activePage:u},(function(){c.setState({isInfiniteScrollLoading:!1})}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c.state=D(D({},c.props),{},{items:[],activePage:1,total:0,isLoading:!0,pivot:40,manufacturers:{po:[],bo:[]},isPartner:!1,q:null,isInfiniteScrollLoading:!1}),c}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.state.link;this.supportsIntersectionObserver=!(!("IntersectionObserver"in window)||!("IntersectionObserverEntry"in window)||!("intersectionRatio"in window.IntersectionObserverEntry.prototype)||!("isIntersecting"in window.IntersectionObserverEntry.prototype)),this.getData(t);var n=!!localStorage.getItem("is_partner")&&JSON.parse(localStorage.getItem("is_partner"));this.setState({isPartner:n}),void 0!==O.a.query.p&&this.setState({activePage:Number.parseInt(O.a.query.p.toString(),10)}),window.addEventListener("keyup",(function(t){e.handleArrowKey(t.key)}),{passive:!0})}},{key:"componentDidUpdate",value:function(e){var t=this.props.link;e.link!==t&&this.getData(t)}},{key:"componentWillUnmount",value:function(){var e=this;window.removeEventListener("keyup",(function(t){e.handleArrowKey(t.key)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.items,o=t.activePage,i=t.total,c=t.isLoading,s=t.pagination,u=t.homepage,l=t.isInfiniteScrollLoading,d=t.link,p=this.props.useIntersectionObserver,f=Math.floor(i/40);return Object(r.jsxs)("div",{className:"gallery-product ".concat(u?"gallery-homepage":""),children:[c?Object(r.jsx)("div",{className:"gallery-product__content",children:Object(a.a)(Array(20)).map((function(e){return Object(r.jsx)("div",{className:"gallery-product__content__product",children:Object(r.jsx)(C.a,{skeleton:!0},e)},e)}))}):Object(r.jsx)("div",{className:"gallery-product__content",children:null!==n&&n.length>0?this.renderProduct(n):Object(r.jsxs)("div",{className:"notFound",children:[Object(r.jsx)("img",{src:M.a.SearchNotFound,alt:"404"}),Object(r.jsx)("span",{children:"Eh kok..."}),Object(r.jsx)("p",{children:"Maaf Kyou ngga berhasil nemuin yang kamu cari"}),Object(r.jsx)("p",{children:"Kamu bisa mengakses sosial media Kyou untuk minta admin Kyou bantu cariin yah!"})]})}),p?Object(r.jsx)(r.Fragment,{children:this.supportsIntersectionObserver?Object(r.jsx)(x.default,{onChange:this.handleIntersect,rootMargin:"0px 0px 480px 0px",children:Object(r.jsx)("div",{className:"gallery-product__load",children:Object(r.jsx)("button",{type:"button",onClick:function(){e.loadMore(d)},children:l?"Mencari produk favorit untukmu...":"Klik untuk melihat item terbaru lainnya!"})})}):Object(r.jsx)("div",{className:"gallery-product__load",children:Object(r.jsx)("button",{type:"button",onClick:function(){e.loadMore(d)},children:l?"Mencari produk favorit untukmu...":"Klik untuk melihat item terbaru lainnya!"})})}):null,s?Object(r.jsx)("div",{className:c||f<1?"hidden":"gallery-product__pagination",children:Object(r.jsx)(j.a,{hideFirstLastPages:!0,activePage:o,itemsCountPerPage:40,totalItemsCount:i,pageRangeDisplayed:5,onChange:this.pageChange,innerClass:"gallery-product__pagination__paging"})}):null]})}}]),n}(o.Component);Object(v.a)(L,"defaultProps",{search:!1,setResult:function(){},setFilter:function(){},setLoading:function(){},pagination:!0,homepage:!1,useIntersectionObserver:!1,isx:!1})},"5dko":function(e,t){},beY5:function(e,t,n){"use strict";var r=n("mXGw"),a=n.n(r),o=n("xARA"),i=n("xnNu"),c=n("rYPP"),s=(n("5dko"),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),u=["root","rootMargin","threshold"],l=["root","rootMargin","threshold","disabled"],d=function(e){return u.reduce((function(t,n){var r,a="root"===n&&"[object String]"===c.f.call(e.root);return Object.assign(t,((r={})[n]=a?document.querySelector(e[n]):e[n],r))}),{})},p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleChange=function(e){t.props.onChange(e,t.externalUnobserve)},t.handleNode=function(e){var n=t.props.children;if(Object(c.b)(n)){var r=n.ref;"function"===typeof r?r(e):r&&c.a.call(r,"current")&&(r.current=e)}if(t.targetNode=void 0,e){var a=Object(o.findDOMNode)(e);a&&1===a.nodeType&&(t.targetNode=a)}},t.observe=function(){if(null==t.props.children||t.props.disabled)return!1;if(!t.targetNode)throw new Error("ReactIntersectionObserver: Can't find DOM node in the provided children. Make sure to render at least one DOM node in the tree.");return t.observer=Object(i.a)(d(t.props)),t.target=t.targetNode,Object(i.b)(t),!0},t.unobserve=function(e){Object(i.c)(t,e)},t.externalUnobserve=function(){t.targetNode&&t.unobserve(t.targetNode)},t}return s(t,e),t.prototype.getSnapshotBeforeUpdate=function(e){var t=this;this.prevTargetNode=this.targetNode;var n=l.some((function(n){return Object(c.d)(t.props[n],e[n])}));return n&&this.prevTargetNode&&(e.disabled||this.unobserve(this.prevTargetNode)),n},t.prototype.componentDidUpdate=function(e,t,n){var r=!1;n||(r=this.prevTargetNode!==this.targetNode)&&null!=this.prevTargetNode&&this.unobserve(this.prevTargetNode),(n||r)&&this.observe()},t.prototype.componentDidMount=function(){this.observe()},t.prototype.componentWillUnmount=function(){this.targetNode&&this.unobserve(this.targetNode)},t.prototype.render=function(){var e=this.props.children;return null!=e?a.a.cloneElement(a.a.Children.only(e),{ref:this.handleNode}):null},t.displayName="IntersectionObserver",t}(a.a.Component);t.default=p},rYPP:function(e,t,n){"use strict";var r;n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"f",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"e",(function(){return l}));var a=/^-?\d*\.?\d+(px|%)$/;function o(e){var t=(e?e.trim():"0px").split(/\s+/).map((function(e){if(!a.test(e))throw new Error("rootMargin must be a string literal containing pixels and/or percent values");return e})),n=t.shift(),r=t[0],o=void 0===r?n:r,i=t[1],c=void 0===i?n:i,s=t[2];return n+" "+o+" "+c+" "+(void 0===s?o:s)}function i(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===t.length?e.some((function(n,r){return i(e[r],t[r])})):e!==t}var c=(r=Object.prototype).hasOwnProperty,s=r.toString;function u(e){return e&&c.call(e,"ref")}function l(e){return e&&"number"!==typeof e?e.join(","):e}},rlyl:function(e,t,n){},xnNu:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return u}));var r=n("rYPP"),a=new Map;function o(e,t){var n=a.get(e);if(n)for(var r=n.values(),o=void 0;o=r.next().value;)if(o.target===t.target)return o;return null}function i(e,t){for(var n=0;n<e.length;n++){var r=o(t,e[n]);r&&r.handleChange(e[n])}}function c(e){var t=function(e){void 0===e&&(e={});for(var t,n=e.root||null,o=Object(r.c)(e.rootMargin),i=Array.isArray(e.threshold)?e.threshold:[null!=e.threshold?e.threshold:0],c=a.keys();t=c.next().value;)if(n===t.root&&o===t.rootMargin&&!Object(r.d)(i,t.thresholds))return t;return null}(e);if(t)return t;var n=new IntersectionObserver(i,e);return a.set(n,new Set),n}function s(e){var t;null===(t=a.get(e.observer))||void 0===t||t.add(e),e.observer.observe(e.target)}function u(e,t){if(a.has(e.observer)){var n=a.get(e.observer);(null===n||void 0===n?void 0:n.delete(e))&&(n.size>0?e.observer.unobserve(t):(e.observer.disconnect(),a.delete(e.observer)))}}}}]);